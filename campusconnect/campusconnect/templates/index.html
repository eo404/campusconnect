{% extends 'base.html' %}
{% block content %}
<div class="container">
  <div class="hero-text">
    <h1>Stay Connected</h1>
    <p class="tagline">Discover, join, and manage events happening all around campus. Never miss out on an opportunity to learn, network, or have fun.</p>
  </div>

  <div class="row mb-4 align-items-center">
    <div class="col-12 col-md-8">
      <form class="form-inline">
        <input class="form-control flex-grow-1 mr-2" placeholder="Search events..." name="q" value="{{ request.args.get('q','') }}">
        <button class="btn btn-outline-secondary">Search</button>
      </form>
    </div>
    
    <div class="col-12 col-md-4 text-right text-muted">
      Showing {{ events|length }} events
    </div>
  </div>

  <div class="row">
    {% for e in events %}
      <div class="col-12 col-md-4 mb-4">
        <div class="card h-100 shadow-sm">
          <img src="{{ url_for('static', filename=e.image) }}" class="card-img-top event-image" alt="{{ e.title }}">
          <div class="card-body">
            <span class="badge badge-pill badge-light category-pill">{{ e.category or 'General' }}</span>
            <h5 class="card-title mt-2">{{ e.title }}</h5>
            <p class="mb-1 text-muted"><small>📅 {{ e.date.strftime('%B %d, %Y') }} • {{ e.time_str or '' }}</small></p>
            <p class="mb-2 text-muted"><small>📍 {{ e.location or 'TBA' }}</small></p>
            <a href="{{ url_for('event_detail', event_id=e.id) }}" class="btn btn-outline-primary btn-sm">View details</a>
            {% if current_user.is_authenticated and (current_user.is_admin_user or (current_user.role=='organizer')) %}
            <a href="{{ url_for('edit_event', event_id=e.id) }}" class="btn btn-outline-secondary btn-sm ml-1">Edit</a>
            {% endif %}
          </div>
          <div class="card-footer bg-white">
            <small class="text-muted">{{ e.attendees|length }} attending</small>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
</div>
{% endblock %}